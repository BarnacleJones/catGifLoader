<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cat GIF loader</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="container">
    <div id="inside">
  <h1>GIF API</h1>
  <br>
  <img src="#">
  <br>
  <button onclick=newImage()>New GIF</button>
<br>
  <label for="search">Search term(s)</label>
  <input type="text" name="search" id="srch" value="cats">
  <br>
</div>
</div>
</body>



<!-- JS on API calls -->


<script>

    const img = document.querySelector('img');

  //making an API call with a promise
  //using fetch for the call, and .then for the promise
  //no error catching on this one

  /*  
  function newImage(){
      let text = document.getElementById("srch").value;
    // let num = parseInt(document.getElementById("num").value);
    // fetch(`https://api.giphy.com/v1/gifs/translate?api_key=mHGoGQ8ruy8tOm3ZKwwGyVZzLky2wMMn&s=${text}&weirdness=${num}`, {mode: 'cors'})
    fetch(`https://api.giphy.com/v1/gifs/translate?api_key=mHGoGQ8ruy8tOm3ZKwwGyVZzLky2wMMn&s=${text}`, {mode: 'cors'})
      .then(function(response) {
        return response.json();
      })
      .then(function(response) {
        img.src = response.data.images.original.url;
      }
      );
    }
    */


  //making an API call with ASYNC and AWAIT
  //converting promise code into async/await code

  //make async function to wrap call into function so can call await (doesnt work globally)

  async function newImage(){
    let text = document.getElementById("srch").value;
    const response = await fetch(`https://api.giphy.com/v1/gifs/translate?api_key=mHGoGQ8ruy8tOm3ZKwwGyVZzLky2wMMn&s=${text}`, {mode: 'cors'})
    const gifdata = await response.json();
    img.src = gifdata.data.images.original.url;
  }


      
      newImage();



    
  </script>
</html>